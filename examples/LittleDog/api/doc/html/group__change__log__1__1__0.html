<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>LittleDog API: Changes For 1.1.0</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>Changes For 1.1.0<br>
<small>
[<a class="el" href="group__ld__historic__changes.html">LittleDog Historic Changes</a>]</small>
</h1><h2><a class="anchor" name="change_log">
Changes</a></h2>
This section describes all API and user-visible changes between LittleDog release 1.0.7 and LittleDog release 1.1.0. Note that a Linux_32 and a Linux_64 bit version of 1.1.0 is available. There should be no functional API differences between the 32 and 64 bit releases.<h3><a class="anchor" name="little_dog">
LittleDog</a></h3>
<ul>
<li>enum LegSegment was removed from <a class="el" href="littledog_8h.html">littledog.h</a>.</li><li>enum MAX_TERRAIN_MARKERS was removed from <a class="el" href="littledog_8h.html">littledog.h</a>.</li><li>error LD_BAD_SEGMENT_INDEX was removed from <a class="el" href="littledog_8h.html">littledog.h</a>.</li><li>enum MAX_MARKERS was increased from 45 to 50.</li><li>enum MAX_TERRAINS was increased from 3 to 5.</li><li>Users now have full access to the API in initControl(), whereas previously, one had to wait until updateControl() was called to have full access.</li><li>A new state, STATE_TRIAL_PLANNING, was introduced. It is fundamentally behaves like a substate of runTrial(), which is now broken up into STATE_TRIAL_PLANNING and STATE_TRIAL_RUNNING. See documentation changes to: runTrial(), class <a class="el" href="classLittleDog.html">LittleDog</a>, and "typical session". See also the new API function donePlanning(), which users must now call in a typical session to indicate that they are ready to run a trial. User software that previously performed a switch() statement on getState() will probably now need to add a case statement for state STATE_TRIAL_PLANNING.</li><li>calibrate() now returns LD_OKAY more judiciously. The calibration should fail less often now as a result of various internal changes.</li><li>The API for getFootForce() has been modified to accept a bduVec3f* rather than a float*. 3-DOF force data is now available. See class documentation. New variables are now logged into datasets for each of these force components.</li><li>Values returned by function getJointOffset() have been updated to reflect the new foot design of <a class="el" href="classLittleDog.html">LittleDog</a>. Essentially, each FOOT_OFFSET has moved slightly closer to the body origin in the X and Z direction. See the latest <a class="el" href="classLittleDog.html">LittleDog</a> user manual.</li><li>LegInfo.force is now a <a class="el" href="classbduVec3f.html">bduVec3f</a> instead of a float, holding x,y,z components.</li><li>LegInfo.force components are now filtered with a second order lowpass filter having a cutoff at 50Hz.</li><li>The battery voltage is now filtered with a first order lowpass filter having a cutoff at 4Hz.</li><li>Joint velocities are now filtered with a second order lowpass filter having a cutoff at 50Hz.</li><li>Internal coefficients for servos were adjusted for all hip rx and hip ry joints. There were no coefficient changes for the knee joints. As a result of the changes, users may find that they need to adjust their settings for k, b, ff_d, and tau_d, up to a factor of 2 (for the hip joints). This change potentially affects: setJointPDServoSetPoints(), setJointPDServoGains(), setJointTorqueServoSetPoints()</li><li>Struct JointInfo has been enhanced to include information, each dt, of the user request min and max torque to be commanded.</li><li>Function setJointTorqueUserLimits() has been added to allow users to set the min and max torque on a per leg and joint basis. Enum DefaultUserTauLimits has been added to help document the defaults limits. See API documentation for details.</li><li>Status::joint_user_saturated has been added to indicate when user torque limiting settings actually limit the commanded torque. New variables are now logged into datasets for each of the new user torque limits and the torque user saturation flags.</li><li>The default K and B values for all joints have been changed in several places (for calibration and all examples) based on actuator tuning test results.</li><li>getJointState() documentation was updated to clarify which arguments are optional.</li><li>Documentation for the retuned Euler angle order was corrected for MocapBodyInfo and IMUInfo. Returned Euler angles from the API are always in yaw-roll-pitch order.</li></ul>
<h3><a class="anchor" name="basic_example">
Basic example</a></h3>
<ul>
<li>The setJointPDServoSetPoints() k and b values were adjusted.</li><li>The curve generation logic of the example was rewritten to be more understandable and maintainable, resulting in a smoother demonstration.</li><li>The basic.pro file has been updated to build against either 32 or 64 bit linux libraries</li></ul>
<h3><a class="anchor" name="calib_example">
Calib example</a></h3>
<ul>
<li>The setJointPDServoSetPoints() k and b values were adjusted.</li><li>The calib.pro file has been updated to link against either 32 or 64 bit linux libraries.</li></ul>
<h3><a class="anchor" name="walk_example">
KinematicWalker example</a></h3>
<ul>
<li>The setJointPDServoSetPoints() k and b values were adjusted.</li><li>Public method getStartingFootPos() was added to allow one to acquire the initial foot locations.</li><li>Public method setTimeScale() was added to allow one to adjust the spline time scale.</li><li>Public method getTimeScale() was added to learn the current spline time scale. Adjusting this time scale speeds up or slows down the walk. See class documentation.</li><li>Public method getWalkVelocity() was added to allow one to learn the walk velocity.</li><li>Public method inStance() was added to indicate when the robot has all legs down.</li><li>Dataset memory for my_dataset is now freed at the appropriate time.</li><li>The "sway offset" variable has been added to my_dataset for debugging.</li><li>The spline offsets, stride lengths, and timing have been tuned for smoother, faster walking.</li><li>Most printf() calls have been converted to <a class="el" href="bduLog_8h.html#a13">bdu_log_printf()</a>, having a log level BDU_LOG_LEVEL_INFO.</li><li>The walk.pro file has been updated to build against either 32 or 64 bit linux libraries.</li></ul>
<h3><a class="anchor" name="ref_gui_ui">
LittleDogUI</a></h3>
<ul>
<li>A timer has been added for the elapsed time that <a class="el" href="classLittleDog.html">LittleDog</a> is in STATE_TRIAL_PLANNING.</li><li>Timers now display the last meaningful latched duration instead of being reset to zero when they are no longer counting. This should make it possible to see all of the relevant timer values at once.</li><li>The newest timer value reported in the LittleDogUI is now only accurate to approximately +/- 0.5 second. To obtain better time granularity, please check the produced datafile. For consistency, the time displayed now only shows whole integer seconds for each of the timers.</li><li>Graphics were added to indicate when the robot is in STATE_TRIAL_PLANNING so as to distinguish it from STATE_TRIAL_RUNNING.</li><li>Button "Run Trial" (m_button_run_trial) was relabeled "Start Planning". This button still calls runTrial() starting a <a class="el" href="classLittleDog.html">LittleDog</a> trial, where the state machine in automatically in STATE_TRIAL_PLANNING. A new button (m_button_done_planning) has been added and is labeled "Run Trial" since it calls donePlanning() moving the state machine to STATE_TRIAL_RUNNING. If the <a class="el" href="classLittleDog.html">LittleDog</a> virtual initControl() or updateControl() functions call donePlanning() before the LittleDogUI calls donePlanning(), then the "Run Trial" button is disabled because it is no longer needed for this trial.</li><li>An optional argument has been added to the constructor of LittleDogUI. It is used to set the deadline, in seconds, for users to complete trial planning. The default value is -1, which disables the planning deadline enforcement. See LittleDogUI.h LittleDogUI now has the ability to move the <a class="el" href="classLittleDog.html">LittleDog</a> state from STATE_TRIAL_PLANNING to STATE_TRIAL_RUNNING if deadline enforcement is enabled and the user does not call donePlanning() quickly enough.</li></ul>
<h3><a class="anchor" name="minimum_ui_example">
minimum_ui_example</a></h3>
<ul>
<li>main.cpp has been enhanced to read argc and argv in case the user wants to pass in a command line argument for the planning deadline.</li><li>The README file has been updated to describe the planning deadline argument. Users are advised to become familiar with this new argument and behavior.</li><li>MyLittleDog.cpp has been updated to call donePlanning().</li><li>minimum_ui_example.pro file has been updated to build against either 32 or 64 bit linux libraries. </li></ul>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Wed Dec 31 14:18:26 2008 for LittleDog API by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
